<tr>
    <td>{{.ID}}</td>
    <td>{{.Name}}</td>
    <td>{{.Date}}</td>
    <td>
        <span class="status-indicator status-{{.Status}}">{{.Status}}</span>
        {{ if and (eq .Status "failed") .HasResults }}
            <span class="partial-results-indicator" title="Partial results available before failure">⚠️ Partial</span>
        {{ end }}
    </td>
    <td>
        {{ if or (eq .Status "ok") (and (eq .Status "failed") .HasResults) }}
            <a href="/download?id={{.ID}}" download class="button download-button">Download{{ if eq .Status "failed" }} (Partial){{ end }}</a>
            <a href="/map?id={{.ID}}" target="_blank" class="button map-button">View on Map</a>
        {{ end }}
        {{ if eq .Status "working" }}
            <button hx-post="/stop?id={{.ID}}"
                    hx-target="closest tr"
                    hx-swap="outerHTML"
                    class="button stop-button">Stop</button>
        {{ end }}
        {{ if eq .Status "failed" }}
            <button hx-post="/retry?id={{.ID}}"
                    hx-target="closest tr"
                    hx-swap="outerHTML"
                    class="button retry-button">Retry</button>
        {{ end }}
        <button hx-delete="/delete?id={{.ID}}"
                hx-target="closest tr"
                hx-swap="outerHTML"
                hx-confirm="Are you sure you want to delete this job?"
                class="delete-button">Delete</button>
    </td>
</tr>
